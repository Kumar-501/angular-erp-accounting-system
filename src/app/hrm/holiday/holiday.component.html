<div class="holiday-container">
  <!-- Add Holiday Button (visible based on role) -->
  <button *ngIf="showAddButton" class="btn btn-primary" (click)="openAddModal()">
    <i class="fa fa-plus"></i> Add Holiday
  </button>  
  
  <!-- Add/Edit Holiday Popup -->
  <div *ngIf="showPopup" class="popup-overlay">
    <div class="popup">
      <button class="close-button" (click)="closePopup()">
        <i class="fas fa-times"></i>
      </button>
      
      <form [formGroup]="holidayForm" (ngSubmit)="saveHoliday()">
        <h3>{{ isEditMode ? 'Edit Holiday' : 'Add Holiday' }}</h3>
        
        <div class="form-group">
          <label for="name">Holiday Name:*</label>
          <input id="name" formControlName="name" placeholder="Enter holiday name" />
          <div *ngIf="holidayForm.get('name')?.invalid && holidayForm.get('name')?.touched" class="error-message">
            Holiday name is required
          </div>
        </div>
        
        <div class="form-group">
          <label for="startDate">Start Date:*</label>
          <input type="date" id="startDate" formControlName="startDate" />
          <div *ngIf="holidayForm.get('startDate')?.invalid && holidayForm.get('startDate')?.touched" class="error-message">
            Start date is required
          </div>
        </div>
        
        <div class="form-group">
          <label for="endDate">End Date:*</label>
          <input type="date" id="endDate" formControlName="endDate" />
          <div *ngIf="holidayForm.get('endDate')?.invalid && holidayForm.get('endDate')?.touched" class="error-message">
            End date is required
          </div>
        </div>
        
        <div class="form-group">
          <label for="businessLocation">Business Location:*</label>
          <select id="businessLocation" formControlName="businessLocation">
            <option value="" disabled>Select a location</option>
            <option *ngFor="let location of locations" [value]="location.id">
              {{ location.name }}
            </option>
          </select>
          <div *ngIf="holidayForm.get('businessLocation')?.invalid && holidayForm.get('businessLocation')?.touched" class="error-message">
            Location is required
          </div>
        </div>
        
        <div class="form-group">
          <label for="note">Note:</label>
          <textarea id="note" formControlName="note" placeholder="Enter any additional notes"></textarea>
        </div>
        
        <div class="form-actions">
          <button type="submit" class="btn-save" [disabled]="holidayForm.invalid">
            {{ isEditMode ? 'Update' : 'Save' }}
          </button>
          <button type="button" class="btn-close" (click)="closePopup()">Close</button>
        </div>
      </form>
    </div>
  </div>
  
  <!-- Holidays List -->
  <div class="holidays-list">
    <h2>Holidays List</h2>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Start Date</th>
          <th>End Date</th>
          <th>Location</th>
          <th>Note</th>
          <th *ngIf="showEditDeleteButtons">Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let holiday of holidays">
          <td>{{ holiday.name }}</td>
          <td>{{ holiday.startDate | date }}</td>
          <td>{{ holiday.endDate | date }}</td>
          <td>{{ getLocationName(holiday.businessLocation) }}</td>
          <td>{{ holiday.note }}</td>
          <td *ngIf="showEditDeleteButtons">
            <button class="btn-edit" (click)="editHoliday(holiday)">
              <i class="fas fa-edit"></i> Edit
            </button>
            <button class="btn-delete" (click)="deleteHoliday(holiday.id)">
              <i class="fas fa-trash"></i> Delete
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>