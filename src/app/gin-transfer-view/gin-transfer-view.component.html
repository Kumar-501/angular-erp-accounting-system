<div class="dialog-header">
  <h2 mat-dialog-title>GIN Transfer Details - {{data.transfer.referenceNo}}</h2>
  <button mat-icon-button (click)="closeDialog()" class="close-button">
    <mat-icon>close</mat-icon>
  </button>
</div>

<mat-dialog-content>
  <div class="transfer-details-container">
    <!-- Basic Information Section -->
    <div class="details-section">
      <h3>Basic Information</h3>
      <table class="gin-details-table">
        <tr>
          <th>Reference No:</th>
          <td>{{data.transfer.referenceNo}}</td>
        </tr>
        <tr>
          <th>Date:</th>
          <td>{{ transferDate | date:'dd-MM-yyyy HH:mm' }}</td>
        </tr>
        <tr>
          <th>Status:</th>
          <td>
            <span class="status-badge" [ngClass]="(data.transfer.status || 'draft').toLowerCase()">
              {{data.transfer.status || 'Draft'}}
            </span>
          </td>
        </tr>
        <tr>
          <th>Total Amount:</th>
<td>{{ data.transfer.totalAmount | currency:'INR':'symbol' }}</td>
        </tr>
        <tr>
          <th>Shipping Charges:</th>
          <td>{{data.transfer.shippingCharges | currency:'INR':'symbol'}}</td>
        </tr>
        <tr *ngIf="data.transfer.additionalNotes">
          <th>Additional Notes:</th>
          <td>{{data.transfer.additionalNotes}}</td>
        </tr>
      </table>
    </div>

    <!-- Locations Section -->
    <div class="locations-section">
      <h3>Locations</h3>
      <table class="gin-details-table">
        <tr>
          <th>From Location:</th>
          <td>{{data.transfer.locationFromName || data.getLocationName(data.transfer.locationFrom)}}</td>
        </tr>
        <tr>
          <th>To Location(s):</th>
          <td>
            <div *ngFor="let location of getDestinationLocations(); let i = index">
              {{location}}
            </div>
          </td>
        </tr>
      </table>
    </div>

    <!-- Products Section -->
    <div class="products-section" *ngIf="getAllProducts().length > 0">
      <h3>Products</h3>
      <table class="products-table">
        <thead>
          <tr>
            <th>#</th>
            <th>Product Name</th>
            <th>SKU</th>
            <th>Quantity</th>
            <th>Unit</th>
            <th>Unit Price</th>
            <th>Subtotal</th>
            <th *ngIf="data.transfer.transfers && data.transfer.transfers.length > 0">Destination</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let product of getAllProducts(); let i = index">
            <td>{{i + 1}}</td>
            <td>{{product.productName}}</td>
            <td>{{product.sku || 'N/A'}}</td>
            <td>{{product.quantity}}</td>
            <td>{{product.unit || 'pcs'}}</td>
            <td>{{product.unitPrice |currency:'INR':'symbol'}}</td>
            <td>{{product.subtotal | currency:'INR':'symbol'}}</td>
            <td *ngIf="data.transfer.transfers && data.transfer.transfers.length > 0">
              {{product.destinationLocation}}
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- No Products Message -->
    <div *ngIf="getAllProducts().length === 0" class="no-products-section">
      <h3>Products</h3>
      <p>No products found for this transfer.</p>
    </div>
  </div>
</mat-dialog-content>

<mat-dialog-actions align="end">
  <button mat-raised-button color="primary" (click)="print()">
    <mat-icon>print</mat-icon> Print
  </button>
  <button mat-button (click)="closeDialog()">Close</button>
</mat-dialog-actions>